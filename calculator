<!DOCTYPE html>
<html>
<head>
  <title>Politeknik CGPA Calculator</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    label, input, select { display: block; margin: 5px 0; }
    .subject { margin-bottom: 10px; }
    #results { margin-top: 20px; }
  </style>
</head>
<body>

  <h2>Politeknik CGPA Calculator</h2>

  <label>Previous CGPA:</label>
  <input type="number" id="prevCgpa" step="0.01" required>

  <label>Total Previous Credits:</label>
  <input type="number" id="prevCredits" required>

  <hr>

  <h3>Subjects This Semester</h3>
  <div id="subjects"></div>

  <button onclick="addSubject()">+ Add Subject</button>
  <button onclick="calculateCGPA()">Calculate CGPA</button>

  <div id="results"></div>

  <script>
    const gradePoints = {
      "A": 4.00,
      "A-": 3.67,
      "B+": 3.33,
      "B": 3.00,
      "B-": 2.67,
      "C+": 2.33,
      "C": 2.00,
      "D": 1.00,
      "F": 0.00
    };

    function addSubject() {
      const container = document.getElementById('subjects');
      const div = document.createElement('div');
      div.className = 'subject';
      div.innerHTML = `
        <label>Course Name: <input type="text" required></label>
        <label>Credit Hour: <input type="number" step="0.5" required></label>
        <label>Grade:
          <select>
            <option>A</option><option>A-</option><option>B+</option>
            <option>B</option><option>B-</option><option>C+</option>
            <option>C</option><option>D</option><option>F</option>
          </select>
        </label>
        <hr>
      `;
      container.appendChild(div);
    }

    function calculateCGPA() {
      const prevCgpa = parseFloat(document.getElementById("prevCgpa").value);
      const prevCredits = parseFloat(document.getElementById("prevCredits").value);
      const subjects = document.querySelectorAll(".subject");

      let totalPoints = 0;
      let currentCredits = 0;

      subjects.forEach(subject => {
        const inputs = subject.querySelectorAll("input");
        const grade = subject.querySelector("select").value;
        const credit = parseFloat(inputs[1].value);

        const point = gradePoints[grade];
        totalPoints += point * credit;
        currentCredits += credit;
      });

      const currentGpa = totalPoints / currentCredits;
      const totalAllCredits = prevCredits + currentCredits;
      const newCgpa = ((prevCgpa * prevCredits) + (currentGpa * currentCredits)) / totalAllCredits;

      document.getElementById("results").innerHTML = `
        <h3>Results</h3>
        ðŸ“š Current GPA: <strong>${currentGpa.toFixed(2)}</strong><br>
        ðŸ§¾ Total Credits: <strong>${totalAllCredits}</strong><br>
        ðŸŽ“ New CGPA: <strong>${newCgpa.toFixed(2)}</strong>
      `;
    }

    // Auto-add 3 subjects on load
    for (let i = 0; i < 3; i++) addSubject();
  </script>

</body>
</html>
